{"title":"'时间处理'","slug":"时间处理","date":"2018-05-03T01:26:59.000Z","updated":"2018-11-19T10:01:52.399Z","comments":true,"excerpt":"","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>在做app或小程序过程中，经常会遇到发布时间的处理，专门写了一个处理的方法，方便以后使用</p>\n<h2 id=\"正文\"><a href=\"#正文\" class=\"headerlink\" title=\"正文\"></a>正文</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var minute = 1000 * 60;</span><br><span class=\"line\">var hour = minute * 60;</span><br><span class=\"line\">var day = hour * 24;</span><br><span class=\"line\">var halfamonth = day * 15;</span><br><span class=\"line\">var month = day * 30;</span><br><span class=\"line\">var result;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> getDateDiff(dateTimeStamp)&#123;</span><br><span class=\"line\">  var now = new Date().getTime()/1000;</span><br><span class=\"line\">  var diffValue = now - dateTimeStamp;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span>(diffValue &lt; 0)&#123;</span><br><span class=\"line\">    //console.log(<span class=\"string\">\"结束日期不能小于开始日期！\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  var monthC = diffValue/month;</span><br><span class=\"line\">  var weekC = diffValue/(7*day);</span><br><span class=\"line\">  var dayC = diffValue/day;</span><br><span class=\"line\">  var hourC = diffValue/hour;</span><br><span class=\"line\">  var minC = diffValue/minute;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(monthC&gt;=1)&#123;</span><br><span class=\"line\">    result = parseInt(monthC) + <span class=\"string\">\"个月前\"</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(weekC&gt;=1)&#123;</span><br><span class=\"line\">    result = parseInt(weekC) + <span class=\"string\">\"周前\"</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(dayC&gt;=1)&#123;</span><br><span class=\"line\">    result = parseInt(dayC) +<span class=\"string\">\"天前\"</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(hourC&gt;=1)&#123;</span><br><span class=\"line\">    result = parseInt(hourC) +<span class=\"string\">\"个小时前\"</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(minC&gt;=1)&#123;</span><br><span class=\"line\">    result = parseInt(minC) +<span class=\"string\">\"分钟前\"</span>;</span><br><span class=\"line\">  &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">    result = <span class=\"string\">\"刚刚发表\"</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"built_in\">return</span> result;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","categories":[],"tags":[]}